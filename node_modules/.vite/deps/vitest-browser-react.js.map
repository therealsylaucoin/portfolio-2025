{
  "version": 3,
  "sources": ["../../vitest-browser-react/dist/chunk-A67NRMUW.js", "../../vitest-browser-react/dist/index.js"],
  "sourcesContent": ["// src/pure.ts\nimport { debug, getElementLocatorSelectors } from \"@vitest/browser/utils\";\nimport React from \"react\";\nimport ReactDOMClient from \"react-dom/client\";\nfunction act(cb) {\n  const _act = React.act || React.unstable_act;\n  if (typeof _act !== \"function\") {\n    cb();\n  } else {\n    globalThis.IS_REACT_ACT_ENVIRONMENT = true;\n    _act(cb);\n    globalThis.IS_REACT_ACT_ENVIRONMENT = false;\n  }\n}\nvar mountedContainers = /* @__PURE__ */ new Set();\nvar mountedRootEntries = [];\nfunction render(ui, { container, baseElement, wrapper: WrapperComponent } = {}) {\n  if (!baseElement) {\n    baseElement = document.body;\n  }\n  if (!container) {\n    container = baseElement.appendChild(document.createElement(\"div\"));\n  }\n  let root;\n  if (!mountedContainers.has(container)) {\n    root = createConcurrentRoot(container);\n    mountedRootEntries.push({ container, root });\n    mountedContainers.add(container);\n  } else {\n    mountedRootEntries.forEach((rootEntry) => {\n      if (rootEntry.container === container) {\n        root = rootEntry.root;\n      }\n    });\n  }\n  act(() => {\n    root.render(\n      strictModeIfNeeded(wrapUiIfNeeded(ui, WrapperComponent))\n    );\n  });\n  return {\n    container,\n    baseElement,\n    debug: (el, maxLength, options) => debug(el, maxLength, options),\n    unmount: () => {\n      act(() => {\n        root.unmount();\n      });\n    },\n    rerender: (newUi) => {\n      act(() => {\n        root.render(\n          strictModeIfNeeded(wrapUiIfNeeded(newUi, WrapperComponent))\n        );\n      });\n    },\n    asFragment: () => {\n      return document.createRange().createContextualFragment(container.innerHTML);\n    },\n    ...getElementLocatorSelectors(baseElement)\n  };\n}\nfunction cleanup() {\n  mountedRootEntries.forEach(({ root, container }) => {\n    act(() => {\n      root.unmount();\n    });\n    if (container.parentNode === document.body) {\n      document.body.removeChild(container);\n    }\n  });\n  mountedRootEntries.length = 0;\n  mountedContainers.clear();\n}\nfunction createConcurrentRoot(container) {\n  const root = ReactDOMClient.createRoot(container);\n  return {\n    render(element) {\n      root.render(element);\n    },\n    unmount() {\n      root.unmount();\n    }\n  };\n}\nvar config = {\n  reactStrictMode: false\n};\nfunction strictModeIfNeeded(innerElement) {\n  return config.reactStrictMode ? React.createElement(React.StrictMode, null, innerElement) : innerElement;\n}\nfunction wrapUiIfNeeded(innerElement, wrapperComponent) {\n  return wrapperComponent ? React.createElement(wrapperComponent, null, innerElement) : innerElement;\n}\nfunction configure(customConfig) {\n  Object.assign(config, customConfig);\n}\n\nexport {\n  render,\n  cleanup,\n  configure\n};\n", "import {\n  cleanup,\n  render\n} from \"./chunk-A67NRMUW.js\";\n\n// src/index.ts\nimport { page } from \"@vitest/browser/context\";\nimport { beforeEach } from \"vitest\";\npage.extend({\n  render,\n  [Symbol.for(\"vitest:component-cleanup\")]: cleanup\n});\nbeforeEach(() => {\n  cleanup();\n});\nexport {\n  cleanup,\n  render\n};\n"],
  "mappings": "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",
  "names": ["React", "ReactDOMClient"]
}
